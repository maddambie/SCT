<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ChangePassword</title>
<link rel="stylesheet" href="/account.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<body>

 <main class="account-container">
        <h2>Account Settings</h2>

        <div class="account-info">
			<div th:if="${message}" class="alert alert-success" th:text="${message}"></div>
            <div class="details-section">
                <p><strong>Full Name:</strong> <span th:text="${user.fullname}"></span></p>
                <p><strong>Email:</strong> <span th:text="${user.email}"></span></p>
                <p><strong>Role:</strong> <span id="role">Student</span></p>
            </div>
        </div>

        <div class="password-update">
            <h3>Change Password</h3>
            <form action="ChangePassword" method="post">
                <label for="current-password">Current Password:</label>
                <input type="password" id="current-password" name="currentPassword" required>

                <label for="new-password">New Password:</label>
                <input type="password" id="new-password" name="newPassword" required>

                <label for="confirm-password">Confirm Password:</label>
                <input type="password" id="confirm-password" name="confirmPassword" required>

                <button id="submit" type="button" class="update-btn">Update Password</button>
            </form>
        </div>
    </main>
    
    
    <input id="hiddenpass" type="hidden" th:value="${user.password}">
    

</body>
</html>



<script>
let hiddenPass = document.getElementById("hiddenpass");
let currentPassword = document.getElementById("current-password");
let newPassword = document.getElementById("new-password");
let confirmPassword = document.getElementById("confirm-password");

$(document).ready(function(){
	$("#current-password").keyup(function(){
		if(hiddenpass.value != currentPassword.value){
		
			$("#submit").attr("type", "button");
		}
		else{
			$("#submit").attr("type", "submit");
		}
	});
	
	$("#submit").click(function(){
		
			if(newPassword.value == confirmPassword.value && hiddenpass.value == currentPassword.value){

				$("#submit").attr("type", "submit");
			}
			else{

				$("#submit").attr("type", "button");
			}
		
	});
});
</script>
